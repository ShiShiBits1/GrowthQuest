# 成长奖励系统 - 项目配置说明

## 项目结构

本项目是一个基于Flask的成长奖励系统，主要文件结构如下：

```
成长奖励系统/
├── app/
│   ├── __init__.py         # 应用初始化和工厂函数
│   ├── models.py           # 数据库模型
│   ├── views.py            # 视图函数
│   └── main/               # 主蓝图
├── run.py                  # 项目启动文件
├── requirements.txt        # 项目依赖
└── README.md              # 项目说明
```

## 端口配置说明

### 应用端口配置

- **Flask应用运行端口**: 5001
- **配置位置**: `run.py` 文件中绑定的端口
- **不可随意修改**: 除非与其他服务冲突，修改端口需同步更新反向代理配置

### 反向代理配置

- **反向代理目标端口**: 必须设置为 **5001**
- **宝塔面板配置位置**: 网站设置 > 反向代理 > 目标URL
- **正确配置格式**: `http://127.0.0.1:5001` 或 `http://[服务器IP]:5001`

### 避免常见错误

1. **端口不匹配**: 确保反向代理配置的端口与 `run.py` 中设置的端口完全一致
2. **重启服务**: 修改端口配置后，必须重启Nginx服务使配置生效
3. **防火墙**: 确保端口5001在防火墙中已开放

## 项目启动步骤

1. 激活虚拟环境
   ```
   venv\Scripts\activate
   ```

2. 安装依赖
   ```
   pip install -r requirements.txt
   ```

3. 启动项目
   ```
   python run.py
   ```

## 注意事项

- 数据库初始化已集成在 `run.py` 中，无需单独运行 `init_db.py`
- 首次启动会自动创建数据库表和默认管理员账户
- 如遇连接问题，请优先检查端口配置和反向代理设置

## 维护说明

- 定期检查依赖包更新
- 确保反向代理配置与应用端口保持同步
- 备份数据库文件 (`data.sqlite`)