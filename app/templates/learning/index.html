{% extends "base.html" %}

{% block content %}
<div class="container">
    <h2 class="text-center my-4">ğŸ“š å°å­©åœ¨çº¿å­¦ä¹ </h2>
    
    {% if children %}
    <!-- å®¶é•¿ç”¨æˆ·æ˜¾ç¤ºå­©å­é€‰æ‹©å™¨ -->
    <div class="mb-4">
        <div class="dropdown">
            <button class="btn btn-primary dropdown-toggle" type="button" id="childDropdown"
                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                é€‰æ‹©å­©å­: {{ selected_child.name if selected_child else 'è¯·é€‰æ‹©' }}
            </button>
            <div class="dropdown-menu" aria-labelledby="childDropdown">
                {% for c in children %}
                <a class="dropdown-item" href="{{ url_for('main.learning_resources', child_id=c.id) }}">
                    {{ c.name }}
                </a>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}
    
    <div class="row">
        {% for category in categories %}
        <div class="col-md-4 mb-4">
            <div class="card h-100 shadow-sm hover-shadow transition-shadow">
                <div class="card-body">
                    <div class="text-center">
                        <h3 class="card-title display-4 mb-3">{{ category.icon }}</h3>
                        <h4 class="card-title">{{ category.name }}</h4>
                    </div>
                    <p class="card-text text-center mt-2">{{ category.description }}</p>
                    <div class="text-center mt-4">
                        <a href="{{ url_for('main.learning_category', category_id=category.id) }}{% if selected_child %}?child_id={{ selected_child.id }}{% endif %}" 
                           class="btn btn-outline-primary">
                            æµè§ˆèµ„æº
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% else %}
        <div class="col-12">
            <div class="alert alert-info text-center">
                æš‚æ— å­¦ä¹ åˆ†ç±»ï¼Œè¯·ç¨åå†æ¥æŸ¥çœ‹
            </div>
        </div>
        {% endfor %}
    </div>
    
    {% if child %}
    <div class="mt-6">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">{{ child.name }}çš„å­¦ä¹ ç»Ÿè®¡</h5>
            </div>
            <div class="card-body">
                <a href="{{ url_for('main.learning_statistics', child_id=child.id) }}" 
                   class="btn btn-primary btn-block">
                    æŸ¥çœ‹è¯¦ç»†å­¦ä¹ ç»Ÿè®¡
                </a>
            </div>
        </div>
    </div>
    {% endif %}
</div>

<style>
.transition-shadow {
    transition: box-shadow 0.3s ease;
}

.hover-shadow:hover {
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
}
</style>
{% endblock %}