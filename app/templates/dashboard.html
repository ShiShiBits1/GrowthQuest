{% extends "base.html" %}

{% block title %}仪表盘{% endblock %}

{% block content %}
<h1>欢迎使用小孩成长奖励系统</h1>
<h2>我的孩子</h2>
{% if children %}
<table>
    <tr>
        <th>姓名</th>
        <th>年龄</th>
        <th>当前积分</th>
        <th>操作</th>
    </tr>
    {% for child in children %}
    <tr>
        <td>{{ child.name }}</td>
        <td>{{ child.age or '未设置' }}</td>
        <td>
            <div>
                {{ child.points }} 分
            </div>
            <!-- 积分进度条 -->
            <div class="progress-container" style="width: 100%; height: 10px; background-color: #eee; border-radius: 5px; margin-top: 5px;">
                {% set progress_width = (child.points / 200) * 100 %}
                {% set progress_width = progress_width if progress_width <= 100 else 100 %}
                <!-- 根据积分范围显示不同颜色 -->
                {% if child.points < 50 %}
                <div class="progress-bar" style="width: {{ progress_width }}%; height: 100%; background-color: #ff9800; border-radius: 5px;"></div>
                {% elif child.points < 100 %}
                <div class="progress-bar" style="width: {{ progress_width }}%; height: 100%; background-color: #4caf50; border-radius: 5px;"></div>
                {% else %}
                <div class="progress-bar" style="width: {{ progress_width }}%; height: 100%; background-color: #2196f3; border-radius: 5px;"></div>
                {% endif %}
            </div>
        </td>
        <td>
            <a href="{{ url_for('main.child_detail', child_id=child.id) }}" class="button">查看详情</a>
            <a href="{{ url_for('main.child_progress', child_id=child.id) }}" class="button">积分追踪</a>
        </td>
    </tr>
    {% endfor %}
</table>
{% else %}
<p>您还没有添加孩子，点击下方按钮添加</p>
{% endif %}
<a href="{{ url_for('main.add_child') }}" class="button">添加孩子</a>
{% endblock %}